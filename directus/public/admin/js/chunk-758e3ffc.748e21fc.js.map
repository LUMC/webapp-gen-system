{"version":3,"sources":["webpack:///./src/interfaces/file-size/format-size.js","webpack:///./node_modules/@directus/extension-toolkit/mixins/interface.js","webpack:///./src/interfaces/file/input.vue?5beb","webpack:///./src/interfaces/file/input.vue?ae90","webpack:///src/interfaces/file/input.vue","webpack:///./src/interfaces/file/input.vue?e7b9","webpack:///./src/interfaces/file/input.vue","webpack:///./src/interfaces/file/get-icon.js"],"names":["formatSize","bytes","arguments","length","undefined","decimal","threshold","Boolean","Math","abs","concat","units","unitIndex","remainingBytes","toFixed","__webpack_require__","d","__webpack_exports__","module","exports","props","id","type","String","required","name","value","default","Number","readonly","collection","options","Object","newItem","relation","fields","values","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_input_vue_vue_type_style_index_0_id_5df6cf44_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_input_vue_vue_type_style_index_0_id_5df6cf44_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","title","image","subtitle","subtitleExtra","src","icon","href","remove","text","$t","big-image","on","$event","$emit","small","disabled","accept","multiple","upload","saveUpload","click","newFile","_v","_s","existing","to","buttons","done","close","_e","action-required","placeholder","input","onSearchInput","view-type","viewType","selection","filters","view-query","viewQuery","view-options","viewOptions","setViewOptions","query","setViewQuery","select","saveSelection","staticRenderFns","inputvue_type_script_lang_js_","mixins","interface_default","a","data","viewOptionsOverride","viewTypeOverride","viewQueryOverride","filtersOverride","_","cloneDeep","computed","filename","split","pop","$d","Date","uploaded_on","startsWith","width","height","format_size","filesize","full_url","get_icon","objectSpread","toConsumableArray","fileTypeFilters","some","filter","field","operator","trim","created","debounce","methods","fileInfo","updates","q","file","file_inputvue_type_script_lang_js_","component","componentNormalizer","getIcon"],"mappings":"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","file":"js/chunk-758e3ffc.748e21fc.js","sourcesContent":["/**\n * Convert a value in bytes to a human readable format\n * @param {number} value The value in bytes to format\n * @return {string} The human readable filesize\n * @example\n *\n * const byteSize = 1500;\n * const fileSize = formatSize(byteSize);\n * // => '1.5 KB'\n * @see https://stackoverflow.com/a/14919494/4859211\n */\nexport default function formatSize(bytes = 0, decimal = true) {\n  const threshold = decimal ? 1000 : 1024;\n\n  if (Boolean(bytes) === false) {\n    return \"--\";\n  }\n\n  if (Math.abs(bytes) < threshold) {\n    return `${bytes} B`;\n  }\n\n  const units = decimal\n    ? [\"kB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"]\n    : [\"KiB\", \"MiB\", \"GiB\", \"TiB\", \"PiB\", \"EiB\", \"ZiB\", \"YiB\"];\n\n  let unitIndex = -1;\n  let remainingBytes = bytes;\n\n  do {\n    remainingBytes /= threshold;\n    unitIndex += 1;\n  } while (Math.abs(remainingBytes) >= threshold && unitIndex < units.length - 1);\n\n  return `${remainingBytes.toFixed(1)} ${units[unitIndex]}`;\n}\n","module.exports = {\n  props: {\n    // Unique id for this interface. Should be added to the lower level \n    // HTML input element if applicable. This ID will be used in the label's\n    // `for` attribute\n    id: {\n      type: String,\n      required: true\n    },\n    // Name of the field\n    name: {\n      type: String,\n      required: true\n    },\n    // The current value. This can either be the default value, the saved database\n    // value or the current state after the user made an edit\n    value: {\n      type: null,\n      default: null\n    },\n    // Type of the field, eg `string`, `hash`, or `array`\n    type: {\n      type: String,\n      required: true\n    },\n    // Max length\n    length: {\n      type: [String, Number],\n      default: null\n    },\n    // If the field is readonly or not\n    readonly: {\n      type: Boolean,\n      default: false\n    },\n    // Name of the collection\n    collection: {\n      type: String,\n      default: null\n    },\n    // If the field is required or not\n    required: {\n      type: Boolean,\n      default: false\n    },\n    // Field options. A json object based on the interface's meta.json file\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    // If the item that's currently being edited is new\n    newItem: {\n      type: Boolean,\n      default: false\n    },\n    // The relation of the current field. Will contain information on the related\n    // collection and field(s)\n    relation: {\n      type: Object,\n      default: null\n    },\n    // The other fields in the current edit page\n    fields: {\n      type: Object,\n      default: null\n    },\n    // The values of the other fields on the edit page. Can be used for things like\n    // automatically generating a slug based on another field\n    values: {\n      type: Object,\n      default: null\n    }\n  }\n};\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=style&index=0&id=5df6cf44&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=style&index=0&id=5df6cf44&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-single-file\"},[(_vm.value)?_c('v-card',{staticClass:\"card\",attrs:{\"title\":_vm.image.title,\"subtitle\":_vm.subtitle + _vm.subtitleExtra,\"src\":_vm.src,\"icon\":_vm.icon,\"href\":_vm.href,\"options\":{\n      remove: {\n        text: _vm.$t('delete'),\n        icon: 'delete'\n      }\n    },\"big-image\":\"\"},on:{\"remove\":function($event){return _vm.$emit('input', null)}}}):_c('v-upload',{staticClass:\"uploader\",attrs:{\"small\":\"\",\"disabled\":_vm.readonly,\"accept\":_vm.options.accept,\"multiple\":false},on:{\"upload\":_vm.saveUpload}}),_c('v-button',{attrs:{\"type\":\"button\",\"disabled\":_vm.readonly},on:{\"click\":function($event){_vm.newFile = true}}},[_c('v-icon',{attrs:{\"name\":\"add\"}}),_vm._v(\"\\n    \"+_vm._s(_vm.$t(\"new_file\"))+\"\\n  \")],1),_c('v-button',{attrs:{\"type\":\"button\",\"disabled\":_vm.readonly},on:{\"click\":function($event){_vm.existing = true}}},[_c('v-icon',{attrs:{\"name\":\"playlist_add\"}}),_vm._v(\"\\n    \"+_vm._s(_vm.$t(\"existing\"))+\"\\n  \")],1),(_vm.newFile)?_c('portal',{attrs:{\"to\":\"modal\"}},[_c('v-modal',{attrs:{\"title\":_vm.$t('file_upload'),\"buttons\":{\n        done: {\n          text: _vm.$t('done')\n        }\n      }},on:{\"close\":function($event){_vm.newFile = false}}},[_c('div',{staticClass:\"body\"},[_c('v-upload',{attrs:{\"accept\":_vm.options.accept,\"multiple\":false},on:{\"upload\":_vm.saveUpload}})],1)])],1):_vm._e(),(_vm.existing)?_c('portal',{attrs:{\"to\":\"modal\"}},[_c('v-modal',{attrs:{\"title\":_vm.$t('choose_one'),\"buttons\":{\n        done: {\n          text: _vm.$t('done')\n        }\n      },\"action-required\":\"\"},on:{\"close\":function($event){_vm.existing = false},\"done\":function($event){_vm.existing = false}}},[_c('div',{staticClass:\"search\"},[_c('v-input',{staticClass:\"search-input\",attrs:{\"type\":\"search\",\"placeholder\":_vm.$t('search')},on:{\"input\":_vm.onSearchInput}})],1),_c('v-items',{staticClass:\"items\",attrs:{\"collection\":\"directus_files\",\"view-type\":_vm.viewType,\"selection\":_vm.value ? [_vm.value] : [],\"filters\":_vm.filters,\"view-query\":_vm.viewQuery,\"view-options\":_vm.viewOptions},on:{\"options\":_vm.setViewOptions,\"query\":_vm.setViewQuery,\"select\":_vm.saveSelection}})],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"input-single-file\">\n    <v-card\n      v-if=\"value\"\n      class=\"card\"\n      :title=\"image.title\"\n      :subtitle=\"subtitle + subtitleExtra\"\n      :src=\"src\"\n      :icon=\"icon\"\n      :href=\"href\"\n      :options=\"{\n        remove: {\n          text: $t('delete'),\n          icon: 'delete'\n        }\n      }\"\n      big-image\n      @remove=\"$emit('input', null)\"\n    ></v-card>\n    <v-upload\n      v-else\n      small\n      :disabled=\"readonly\"\n      class=\"uploader\"\n      :accept=\"options.accept\"\n      :multiple=\"false\"\n      @upload=\"saveUpload\"\n    ></v-upload>\n\n    <v-button type=\"button\" :disabled=\"readonly\" @click=\"newFile = true\">\n      <v-icon name=\"add\" />\n      {{ $t(\"new_file\") }}\n    </v-button>\n    <!--\n    -->\n    <v-button type=\"button\" :disabled=\"readonly\" @click=\"existing = true\">\n      <v-icon name=\"playlist_add\" />\n      {{ $t(\"existing\") }}\n    </v-button>\n\n    <portal v-if=\"newFile\" to=\"modal\">\n      <v-modal\n        :title=\"$t('file_upload')\"\n        :buttons=\"{\n          done: {\n            text: $t('done')\n          }\n        }\"\n        @close=\"newFile = false\"\n      >\n        <div class=\"body\">\n          <v-upload :accept=\"options.accept\" :multiple=\"false\" @upload=\"saveUpload\"></v-upload>\n        </div>\n      </v-modal>\n    </portal>\n\n    <portal v-if=\"existing\" to=\"modal\">\n      <v-modal\n        :title=\"$t('choose_one')\"\n        :buttons=\"{\n          done: {\n            text: $t('done')\n          }\n        }\"\n        action-required\n        @close=\"existing = false\"\n        @done=\"existing = false\"\n      >\n        <div class=\"search\">\n          <v-input\n            type=\"search\"\n            :placeholder=\"$t('search')\"\n            class=\"search-input\"\n            @input=\"onSearchInput\"\n          />\n        </div>\n        <v-items\n          class=\"items\"\n          collection=\"directus_files\"\n          :view-type=\"viewType\"\n          :selection=\"value ? [value] : []\"\n          :filters=\"filters\"\n          :view-query=\"viewQuery\"\n          :view-options=\"viewOptions\"\n          @options=\"setViewOptions\"\n          @query=\"setViewQuery\"\n          @select=\"saveSelection\"\n        ></v-items>\n      </v-modal>\n    </portal>\n  </div>\n</template>\n\n<script>\nimport mixin from \"@directus/extension-toolkit/mixins/interface\";\nimport formatSize from \"../file-size/format-size\";\nimport getIcon from \"./get-icon\";\n\nexport default {\n  mixins: [mixin],\n  data() {\n    return {\n      newFile: false,\n      existing: false,\n      viewOptionsOverride: {},\n      viewTypeOverride: null,\n      viewQueryOverride: {},\n      filtersOverride: [],\n      image: _.cloneDeep(this.value)\n    };\n  },\n  computed: {\n    subtitle() {\n      if (!this.image) return \"\";\n\n      return (\n        this.image.filename.split(\".\").pop() +\n        \" • \" +\n        this.$d(new Date(this.image.uploaded_on), \"short\")\n      );\n    },\n    subtitleExtra() {\n      // Image ? -> display dimensions and formatted filesize\n      return this.image.type && this.image.type.startsWith(\"image\")\n        ? \" • \" +\n            this.image.width +\n            \" x \" +\n            this.image.height +\n            \" (\" +\n            formatSize(this.image.filesize) +\n            \")\"\n        : null;\n    },\n    src() {\n      return this.image.type && this.image.type.startsWith(\"image\")\n        ? this.image.data.full_url\n        : null;\n    },\n    icon() {\n      return this.image.type && !this.image.type.startsWith(\"image\")\n        ? getIcon(this.image.type)\n        : null;\n    },\n    href() {\n      return this.image.type && this.image.type === \"application/pdf\"\n        ? this.image.data.full_url\n        : null;\n    },\n    viewOptions() {\n      const viewOptions = this.options.viewOptions;\n      return {\n        ...viewOptions,\n        ...this.viewOptionsOverride\n      };\n    },\n    viewType() {\n      if (this.viewTypeOverride) return this.viewTypeOverride;\n      return this.options.viewType;\n    },\n    viewQuery() {\n      const viewQuery = this.options.viewQuery;\n      return {\n        ...viewQuery,\n        ...this.viewQueryOverride\n      };\n    },\n    filters() {\n      return [...this.options.filters, ...this.fileTypeFilters, ...this.filtersOverride];\n    },\n    fileTypeFilters() {\n      if (\n        !this.options.accept ||\n        this.filtersOverride.length > 0 ||\n        this.options.filters.some(filter => filter.field === \"type\")\n      ) {\n        return [];\n      }\n\n      return [\n        {\n          field: \"type\",\n          operator: \"in\",\n          value: (this.options.accept || \"\").trim().split(/,\\s*/)\n        }\n      ];\n    }\n  },\n  created() {\n    this.onSearchInput = _.debounce(this.onSearchInput, 200);\n  },\n  methods: {\n    saveUpload(fileInfo) {\n      this.image = fileInfo.data;\n      // We know that the primary key of directus_files is called `id`\n      this.$emit(\"input\", { id: fileInfo.data.id });\n\n      this.newFile = false;\n    },\n    setViewOptions(updates) {\n      this.viewOptionsOverride = {\n        ...this.viewOptionsOverride,\n        ...updates\n      };\n    },\n    setViewQuery(updates) {\n      this.viewQueryOverride = {\n        ...this.viewQueryOverride,\n        ...updates\n      };\n    },\n    onSearchInput(value) {\n      this.setViewQuery({\n        q: value\n      });\n    },\n    saveSelection(value) {\n      const file = value[value.length - 1];\n      this.image = file;\n      this.$emit(\"input\", { id: file.id });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.card,\n.uploader {\n  margin-bottom: 20px;\n  width: 100%;\n  max-width: var(--width-x-large);\n}\n\n.uploader {\n  height: 190px;\n}\n\nbutton {\n  display: inline-block;\n  margin-left: 20px;\n  &:first-of-type {\n    margin-left: 0;\n  }\n}\n\n.body {\n  padding: 20px;\n}\n\n.search-input {\n  border-bottom: 1px solid var(--lightest-gray);\n  & >>> input {\n    border-radius: 0;\n    border: none;\n    padding-left: var(--page-padding);\n    height: var(--header-height);\n\n    &::placeholder {\n      color: var(--light-gray);\n    }\n  }\n}\n\n.items {\n  height: calc(100% - var(--header-height) - 1px);\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./input.vue?vue&type=template&id=5df6cf44&scoped=true&\"\nimport script from \"./input.vue?vue&type=script&lang=js&\"\nexport * from \"./input.vue?vue&type=script&lang=js&\"\nimport style0 from \"./input.vue?vue&type=style&index=0&id=5df6cf44&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5df6cf44\",\n  null\n  \n)\n\nexport default component.exports","export default function getIcon(type) {\n  if (type === \"application/pdf\") {\n    return \"picture_as_pdf\";\n  }\n\n  if (type.startsWith(\"application\")) {\n    return \"insert_drive_file\";\n  }\n\n  if (type.startsWith(\"image\")) {\n    return \"crop_original\";\n  }\n\n  if (type.startsWith(\"video\")) {\n    return \"videocam\";\n  }\n\n  if (type.startsWith(\"code\")) {\n    return \"code\";\n  }\n\n  if (type.startsWith(\"audio\")) {\n    return \"audiotrack\";\n  }\n\n  return \"save\";\n}\n"],"sourceRoot":""}